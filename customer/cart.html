<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cart Page</title>
  <link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
  <link rel="stylesheet" href="../assets/css/fontawesome.min.css" />
  <link rel="stylesheet" href="../assets/css/style.css" />
  <style>
    .quantity {
      width: 60px;
      height: 40px;

    }

    /* .delete-btn {
      background: none;
      border: none;
      color: #8f0404;
      padding: 5px;
      border-radius: 5px;
    } */
  </style>
</head>

<body>
  <exclusive-header></exclusive-header>
  <div class="container my-5">
    <div class="mb-4 d-flex align-items-center">
      <p class="mb-0 text-muted">Home / </p>
      <p class="mb-0 ms-2 fw-bold">Cart</p>
    </div>

    <div class="row">
      <!-- Cart Content -->
      <div class="col-lg-8">
        <div class="table-responsive mb-4 shadow-sm rounded bg-white p-3">
          <table class="table">
            <thead class="table-light">
              <tr>
                <th>Product</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Subtotal</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <!-- Items inserted here -->
            </tbody>
          </table>
        </div>

        <div class="d-flex justify-content-between mb-4">
          <button class="btn btn-outline-secondary button--return">Return To Shop</button>
          <button class="btn btn-danger button--clear">Clear Cart</button>
        </div>
      </div>

      <!-- Cart Checkout -->
      <div class="col-lg-4">
        <div class="shadow-sm rounded bg-white p-4">
          <div class="mb-3">
            <input type="text" class="form-control mb-2" id="coupon" placeholder="Coupon Code">
            <button class="btn btn-outline-dark w-100 button--coupon">Apply Coupon</button>
          </div>

          <div class="border-top pt-3">
            <h5>Cart Total</h5>
            <div class="d-flex justify-content-between">
              <p>Subtotal:</p>
              <p id="subtotalincart">$0</p>
            </div>
            <div class="d-flex justify-content-between">
              <p>Shipping:</p>
              <p id="shipping">$0</p>
            </div>
            <div class="d-flex justify-content-between border-top pt-2 fw-bold">
              <p>Total:</p>
              <p id="Total">$0</p>
            </div>
            <button class="btn btn-success w-100 mt-3 button--process">Process To Checkout</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    const processButton = document.querySelector('.button--process');
    processButton.addEventListener('click', () => {
      window.location.href = 'checkout/checkout.html';
    });

    const returnButton = document.querySelector('.button--return');
    returnButton.addEventListener('click', () => {
      window.location.href = '../index.html';
    });

    fetch('../assets/data/products.json')
      .then(response => response.json())
      .then(data => {
        const ids = [1, 2, 5];
        const tbody = document.querySelector('tbody');
        const subtotalInCart = document.getElementById('subtotalincart');
        const shipping = document.getElementById('shipping');
        const total = document.getElementById('Total');
        const couponInput = document.getElementById('coupon');
        const couponButton = document.querySelector('.button--coupon');
        const clearButton = document.querySelector('.button--clear');

        let discount = 0;
        let shippingCost = 30;
        const cartItems = [];

        ids.forEach(id => {
          const productData = data.find(product => product.id === id);
          if (productData) {
            const row = document.createElement('tr');

            row.innerHTML = `
              <td ><img src="${productData.image}" width="50"> <p>${productData.name}</p></td>
              <td class="price">${productData.price}</td>
              <td><input type="number" class="quantity form-control" min="1" value="1"></td>
              <td class="subtotal">$${productData.price}</td>
              <td><button class="btn btn-sm  border-0  delete-btn">X</button></td>
            `;

            tbody.appendChild(row);

            const quantityInput = row.querySelector('.quantity');
            const subtotalCell = row.querySelector('.subtotal');
            const deleteButton = row.querySelector('.delete-btn');
            const price = productData.price;

            cartItems.push({ quantityInput, subtotalCell, price, row });

            quantityInput.addEventListener('input', () => {
              const quantity = parseInt(quantityInput.value) || 1;
              subtotalCell.innerText = `$${(quantity * price).toFixed(2) }`;
              updateCartTotal();
            });

            deleteButton.addEventListener('click', () => {
              row.remove();
              const index = cartItems.findIndex(item => item.quantityInput === quantityInput);
              if (index !== -1) cartItems.splice(index, 1);
              updateCartTotal();
            });
          }
        });

        function updateCartTotal() {
          let subtotalSum = 0;
          cartItems.forEach(item => {
            const quantity = parseInt(item.quantityInput.value) || 1;
            subtotalSum += quantity * item.price;
          });

          const discountedSubtotal = subtotalSum * (1 - discount);
          subtotalInCart.innerText = `$${ subtotalSum.toFixed(2) }`;
          shipping.innerText = `$${ shippingCost }`;
          total.innerText = `$${ (discountedSubtotal + shippingCost).toFixed(2) }`;
        }

        couponButton.addEventListener('click', () => {
          const couponCode = couponInput.value.trim();
          if (couponCode === "Group6-30") {
            discount = 0.3;
            couponInput.style.border = "3px solid green";
          } else {
            discount = 0;
            couponInput.style.border = "3px solid red";
          }
          updateCartTotal();
        });

        clearButton.addEventListener('click', () => {
          tbody.innerHTML = '';
          cartItems.length = 0;
          updateCartTotal();
        });

        updateCartTotal();
      })
      .catch(error => {
        console.error("❌ Error:", error);
      });
  </script>
  <exclusive-footer></exclusive-footer>
  <script src="/assets/js/components/exclusive-header.js" defer></script>
  <script src="/assets/js/components/exclusive-footer.js" defer></script>
</body>

</html>





<!-- <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    
    <link rel="stylesheet" href="cart.css">
    
    
    
  </head>
  <body>




 
      
    
    <div class="cart_container">
      <div class="cart_title">
        <p class="cart_title--home">Home / </p>
        <p class="cart_title--type"> Cart</p>
      </div>
      
      
      <div class="cart">
        <div class="cart_content">
          <div class="cart_content cart_content--view">
            <table>
              <thead>
                <tr>
                  <th>Product</th>
                  <th>Price</th>
                  <th>Quantity</th>
                  <th>Subtotal</th>
                </tr>
              </thead>
              <tbody>

              </tbody>
               <tr>
                <td id="product"><p>LCD Moniter</p></td>
                <td id="price" >$650</td>
                <td><input type="number" id="quantity" min="1" value="1" name="quantity"></td>
                <td id="subtotal"></td>
              </tr> 
              
             </table>
          </div>
          <div class="cart_content cart_content--control">
            <button class="button button--return">Return To Shop</button>
            <button class="button button--update"> Update Cart</button>
  
          </div>
        </div>
        <div class="cart_checkout">
          <div class="cart_checkout--coupon">
            <input type="text" name="coupon" id="coupon" placeholder="Coupon Code">
            <button class="button button--coupon">Aplly Coupon</button>
          </div>
          <div class="cart_checkout--total">
            <p><b>Cart Total</b></p>
            <div class="cart_checkout--total---details">
              <p>Subtotal:</p><p id="subtotalincart"></p>
            </div>
            <hr>
            <div class="cart_checkout--total---details">
              <p>Shipping:</p><p id="shipping"></p>
            </div>
            <hr>
            <div class="cart_checkout--total---details">
              <p>Total:</p><p id="Total">$1750</p>
            </div>
            <div class="cart_checkout--total---done"> <button class="button button--process">Process To Checkout</button></div>
          </div>
        </div>
  
      </div>
      </div> 
      <script>
      processButton = document.querySelector('.button--process');
      processButton.addEventListener('click', () => {
        window.location.href = 'checkout.html';
      })
      
      returnButton = document.querySelector('.button--return');
      returnButton.addEventListener('click', () => {
        window.location.href = '../index.html';
      })
      
      
      fetch('../assets/data/products.json')
        .then(response => response.json())
        .then(data => {
          const ids = [1, 2, 5, 6];
          const tbody = document.querySelector('tbody');
          const subtotalInCart = document.getElementById('subtotalincart');
          const shipping = document.getElementById('shipping');
          const total = document.getElementById('Total');
      
          let shippingCost = 30;
      
          // عشان نخزن كل المنتجات اللي في السلة
          const cartItems = [];
      
          ids.forEach((id) => {
            const productData = data.find(product => product.id === id);
            if (productData) {
              const row = document.createElement('tr');
      
              // HTML لكل صف منتج
              row.innerHTML = `
                <td><img src="${productData.image}" width="50"> <p>${productData.name}</p></td>
                <td class="price">${productData.price}</td>
                <td><input type="number" class="quantity" min="1" value="1"></td>
                <td class="subtotal">$${productData.price}</td>
              `;
      
              tbody.appendChild(row);
      
              const quantityInput = row.querySelector('.quantity');
              const subtotalCell = row.querySelector('.subtotal');
              const price = productData.price;
      
              // نحطهم في array عشان نقدر نحسب الإجمالي بعدين
              cartItems.push({ quantityInput, subtotalCell, price });
      
              quantityInput.addEventListener('input', () => {
                const quantity = parseInt(quantityInput.value) || 1;
                const subTotal = quantity * price;
                subtotalCell.innerText = $${subTotal};
      
                updateCartTotal();
              });
            }
          });
          const couponInput = document.getElementById('coupon');
const couponButton = document.querySelector('.button--coupon');

let discount = 0;
          function updateCartTotal() {
  let subtotalSum = 0;
  cartItems.forEach(item => {
    const quantity = parseInt(item.quantityInput.value) || 1;
    subtotalSum += quantity * item.price;
  });

  const discountedSubtotal = subtotalSum * (1 - discount);

  subtotalInCart.innerText = $${subtotalSum.toFixed(2)};
  shipping.innerText = $${shippingCost};
  total.innerText = $${(discountedSubtotal + shippingCost).toFixed(2)};
}
      
          // أول مرة بعد تحميل الصفحة
          updateCartTotal();
           // النسبة المئوية للخصم (مثلاً 0.3 تعني 30%)

couponButton.addEventListener('click', () => {
  const couponCode = couponInput.value.trim();
  if (couponCode === "Group6-30") {
    discount = 0.3;
    couponInput.style.border = "3px solid green";
  } else {
    discount = 0;
    couponInput.style.border = "3px solid red";
  }
  updateCartTotal(); // نعيد حساب المجموع بعد الكوبون
});
        })
        .catch(error => {
          console.error("❌ Error:", error);
        });
      
      </script>
   
   
  </body>
</html>
 -->