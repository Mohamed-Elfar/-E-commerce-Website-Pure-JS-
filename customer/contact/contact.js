import{loginUser as e,showToast as t,validateEmail as a,validatePhone as r,validateName as s}from"/assets/js/utils.js";function n(e){return e.toLocaleString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1}).replace(","," at").replace(/\s+/g," ")}document.addEventListener("DOMContentLoaded",(()=>{const o=e(),i=document.querySelector("form.needs-validation"),l=document.querySelector("#submitBtn");"Admin"===o?.role&&l.setAttribute("disabled","true");const m=i.name,u=i.email,c=i.phone,d=i.message;o&&(m&&(m.value=o?.firstName||""),u&&(u.value=o?.email||""),c&&(c.value=o?.phone||"")),i.addEventListener("submit",(e=>{e.preventDefault(),e.stopPropagation();const l={name:m?.value.trim()||"",email:u?.value.trim()||"",phone:c?.value.trim()||"",message:d?.value.trim()||"",date:n(new Date),role:o?.role};if(function(e){if(s(e.name),a(e.email),r(e.phone),!e.message||e.message.length<10)return t("error","Please enter a message with at least 10 characters"),!1;return!0}(l))try{const e=JSON.parse(localStorage.getItem("contact"))||[];e.push(l),localStorage.setItem("contact",JSON.stringify(e)),t("success","Message sent successfully!"),i.message.value=""}catch(e){t("error","Failed to save form data.")}}))}));