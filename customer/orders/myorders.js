const e=localStorage.getItem("token")||"",t=JSON.parse(localStorage.getItem("users"))||[],n=document.querySelector("#username"),o=document.querySelector(".order-items");function s(e,t){Swal.fire({title:"Are you sure?",text:`You are about to proceed with: ${t}. Do you want to continue?`,icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, proceed!",cancelButtonText:"Cancel",reverseButtons:!0,background:"#fff",color:"#333"}).then((n=>{n.isConfirmed?(localStorage.setItem("users",JSON.stringify(e)),Swal.fire({title:"Success!",text:`${t} has been processed successfully.`,icon:"success",confirmButtonText:"OK",confirmButtonColor:"#27ae60"}).then((()=>{window.location.reload()}))):n.dismiss===Swal.DismissReason.cancel&&Swal.fire({title:"",text:`${t} has been canceled..`,icon:"info",confirmButtonText:"OK",confirmButtonColor:"#3498db"})}))}!function(){if(e){const r=t.find((t=>t.token===e));r||(window.location.href="../../authentication/login.html"),n.innerHTML=r.firstName,console.log(r),(r.orders||[]).forEach((e=>{const n=document.createElement("div");n.className="order-container d-flex flex-column gap-3 p-4 rounded shadow-sm mb-3",n.style.height="140px";const r=document.createElement("div");r.className="order-images d-flex gap-2",e.products.forEach((e=>{const t=document.createElement("img");t.className="order-image border-radius",t.src=e.image,t.alt="",r.appendChild(t)})),n.innerHTML=`\n        <div class="d-flex justify-content-between">\n            <div class="d-flex gap-2">\n                <p class="fw-bold">Order:</p>\n            </div>\n            <div class="d-flex gap-2">\n                <h6>number:</h6>\n                <p>${e.orderId||"123456"}</p>\n            </div>\n        </div>\n        <div class="d-flex justify-content-between">\n            <div class="d-flex gap-2">\n                <p class="fw-bold">Order Date:</p>\n                <p>${e.date.split("T")[0]||"01/01/2023"}</p>\n            </div>\n            <div>\n                <button class="button-return btn btn-warning d-none" style="width: 100px; height: 35px; color:rgb(250, 250, 250); ">Return</button>\n                <button class="button-cancel btn d-none text-danger" style="width: 100px; height: 35px; background-color:rgb(250, 250, 250); ">Cancel</button>\n            </div>\n            <div class="d-flex gap-2">\n                <div class="ballsOfStatus d-flex">\n                    <div class="completed-order rounded-circle bg-success opacity-25 me-2" style="width: 20px; height: 20px;"></div>\n                    <div class="waiting-order rounded-circle bg-warning opacity-25 me-2" style="width: 20px; height: 20px;"></div>\n                    <div class="canceled-order rounded-circle bg-danger opacity-25" style="width: 20px; height: 20px;"></div>\n                </div>\n                <div>\n                    <p class="order-status">Delivered</p>\n                </div>\n            </div>\n        </div>\n    `;n.querySelector(".d-flex.gap-2").appendChild(r),o.prepend(n);const a=n.querySelector(".completed-order"),d=n.querySelector(".waiting-order"),c=n.querySelector(".canceled-order"),l=n.querySelector(".order-status"),i=n.querySelector(".button-cancel"),u=n.querySelector(".ballsOfStatus"),p=n.querySelector(".button-return");"completed"===e.orderStatus?(d.classList.remove("opacity-100"),d.classList.add("opacity-25"),a.classList.remove("opacity-25"),a.classList.add("opacity-100"),l.textContent="Delivered",n.addEventListener("mouseenter",(()=>{n.style.backgroundColor="",p.classList.remove("d-none"),p.style.display="block"})),n.addEventListener("mouseleave",(()=>{p.classList.add("d-none"),n.style.backgroundColor=""}))):"waiting"===e.orderStatus?(d.classList.remove("opacity-25"),d.classList.add("opacity-100"),l.textContent="Working On It",n.addEventListener("mouseenter",(()=>{n.style.backgroundColor="",i.classList.remove("d-none"),i.style.display="block"})),n.addEventListener("mouseleave",(()=>{i.classList.add("d-none"),n.style.backgroundColor=""})),setTimeout((()=>{e.orderStatus="completed",localStorage.setItem("users",JSON.stringify(t))}),5e3)):"canceled"===e.orderStatus?(d.classList.remove("opacity-100"),d.classList.add("opacity-25"),c.classList.remove("opacity-25"),c.classList.add("opacity-100"),l.textContent="Canceled"):"needtoReturn"===e.orderStatus?(u.classList.add("d-none"),l.textContent="Work On Return",l.style.color="rgb(15, 125, 184)",setTimeout((()=>{e.orderStatus="returned",localStorage.setItem("users",JSON.stringify(t))}),5e3)):"returned"===e.orderStatus?(u.classList.add("d-none"),l.textContent="Returned",l.style.color="rgb(18, 18, 141)"):n.style.backgroundImage='url("/assets/images/error-message.png")',i.addEventListener("click",(n=>{n.preventDefault(),e.orderStatus="canceled",s(t,"Cancel Request")})),p.addEventListener("click",(n=>{n.preventDefault(),e.orderStatus="needtoReturn",s(t,"Return Request")}))}))}else window.location.href="../../authentication/login.html"}();