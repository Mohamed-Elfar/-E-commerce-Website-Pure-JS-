import{loginUser as e}from"/assets/js/utils.js";document.getElementById("order");const t=function(t){const a=e();if(!a)return[];let s=[];return t.forEach((e=>{const t=e.products.filter((e=>e.createdBy===a.userId.toString()));t.length>0&&s.push({...e,products:t})})),s}(JSON.parse(localStorage.getItem("orders")));const a=function(e){const t=new Date,a=t.getDay(),s=new Date(t);s.setDate(t.getDate()-a),s.setHours(0,0,0,0);const o=new Date(s);o.setDate(s.getDate()+6),o.setHours(23,59,59,999);const n={Sun:0,Mon:0,Tue:0,Wed:0,Thu:0,Fri:0,Sat:0};return e.forEach((e=>{const t=new Date(e.date);if(t>=s&&t<=o){const a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"][t.getDay()];n[a]+=e.products.length}})),{labels:Object.keys(n),data:Object.values(n)}}(t),s=document.getElementById("salesChart").getContext("2d");new Chart(s,{type:"line",data:{labels:a.labels,datasets:[{label:"Weekly Sales",data:a.data,backgroundColor:"rgba(75, 192, 192, 0.2)",borderColor:"rgba(75, 192, 192, 1)",borderWidth:3,tension:.4,fill:!0,pointBackgroundColor:"rgba(75, 192, 192, 1)",pointRadius:5}]},options:{responsive:!0,plugins:{legend:{display:!0},tooltip:{callbacks:{label:e=>`${e.raw} sale${1!==e.raw?"s":""}`}}},scales:{y:{beginAtZero:!0,max:Math.max(...a.data,10),ticks:{callback:e=>`${e} sale${1!==e?"s":""}`}}}}});